(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[3],{

/***/ 399:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/card.vue?vue&type=template&id=55545480&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.hide_card)?_c('li',{staticClass:"card col col--has-gutter",class:[_vm.isSelected && _vm.selectable_card && _vm.user.status === 'signedin' ? 'animated card--active' : (_vm.selectable_card ? 'card--inactive' : ''), _vm.card_class, _vm.fade_out_on_click ? '' : ''],style:(_vm.featured_image ? { backgroundImage: 'url(' + _vm.featured_image + ')' } : ''),attrs:{"role":_vm.selectable_card ? 'button' : '',"data-id":_vm.id,"id":_vm.media_type ? 'follow-' + _vm.media_type : ''},on:{"click":function($event){_vm.selectable_card && _vm.user.status === 'signedin' ? (_vm.allow_unfollow ? _vm.followOrUnfollow($event.target) : (!_vm.isSelected ? _vm.followOrUnfollow($event.target) : '')) : _vm.$store.commit('signin/toggleSigninModal', {show_modal: true})}}},[_c('div',{staticClass:"card__inner"},[(_vm.selectable_card)?_c('button',{staticClass:"card__plus",attrs:{"id":_vm.media_type ? 'follow-' + _vm.media_type : ''}},[_c('span',{staticClass:"card__plus__icon"}),_vm._v(" "),_c('span',{staticClass:"card__plus__text"},[_vm._v("Follow")])]):_vm._e(),_vm._v(" "),(_vm.image)?_c('div',{staticClass:"card__image",class:!_vm.image ? 'card__image--blank' : ''},[_c('img',{attrs:{"src":_vm.image,"alt":_vm.title + ' image'}})]):_vm._e(),_vm._v(" "),_c('div',{staticClass:"card__content"},[(_vm.isSelected && _vm.selectable_card && _vm.user.status === 'signedin')?_c('p',{staticClass:"card__label card__label--lg"},[_vm._v("You are following")]):_vm._e(),_vm._v(" "),(!_vm.isSelected && _vm.label)?_c('p',{staticClass:"card__label",domProps:{"innerHTML":_vm._s(_vm.label)}}):_vm._e(),_vm._v(" "),(_vm.title)?_c('p',{staticClass:"card__title",domProps:{"innerHTML":_vm._s(_vm.title)}}):_vm._e(),_vm._v(" "),(_vm.text)?_c('p',{staticClass:"card__text",domProps:{"innerHTML":_vm._s(_vm.text)}}):_vm._e(),_vm._v(" "),_c('span',{staticClass:"card__link"})])])]):_vm._e()}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/card.vue?vue&type=template&id=55545480&

// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js
var es7_object_get_own_property_descriptors = __webpack_require__(36);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.symbol.js
var es6_symbol = __webpack_require__(16);

// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom.iterable.js
var web_dom_iterable = __webpack_require__(12);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.to-string.js
var es6_object_to_string = __webpack_require__(6);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.keys.js
var es6_object_keys = __webpack_require__(26);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(0);

// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js
var vuex_esm = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/axios/index.js
var axios = __webpack_require__(8);
var axios_default = /*#__PURE__*/__webpack_require__.n(axios);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/card.vue?vue&type=script&lang=js&







function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty["a" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ var cardvue_type_script_lang_js_ = ({
  mounted: function mounted() {
    //If user is following this, set it as active on load of component (set specific field for journals, and normal field for interests/newsletters
    if (this.media_type === 'journal') {
      if (this.$store.state.localStorage.user.data[this.id + '_news'] > 0 || this.$store.state.localStorage.user.data[this.id + '_asap'] > 0 || this.$store.state.localStorage.user.data[this.id + '_toc'] > 0) {
        this.isSelected = true;
      }
    } else {
      if (this.$store.state.localStorage.user.data[this.id] == 1) {
        this.isSelected = true;
      }
    }
  },
  props: {
    allow_unfollow: {
      default: true
    },
    fade_out_on_click: false,
    selectable_card: {
      default: true
    },
    card_class: {
      default: 'col--4'
    },
    id: '',
    media_type: '',
    featured_image: '',
    image: '',
    url: {
      default: '',
      type: String
    },
    label: '',
    title: {
      type: String
    },
    text: {
      type: String
    }
  },
  computed: _objectSpread(_objectSpread({}, Object(vuex_esm["b" /* mapState */])({
    user: function user(state) {
      return state.localStorage.user;
    }
  })), {}, {
    eloqua: function eloqua() {
      return this.$store.state.localStorage.eloqua;
    }
  }),
  methods: {
    followOrUnfollow: function followOrUnfollow(card) {
      var _this = this;

      var eloquaValue = !this.isSelected ? 1 : 0,
          data = {},
          eloquaPostParameters = 'elqFormName=' + this.eloqua.formname + '&elqSiteId=' + this.eloqua.siteid + '&emailAddress=' + this.$store.state.localStorage.user.data.emailaddress,
          journalParams = ''; //If this is a journal, set the 3 Eloqua fields for this journal...else set the 1 (e.g. for newsletters or interests)

      if (this.media_type === 'journal') {
        //If user has just followed this journal, set unsub_ealerts = 0
        if (!this.isSelected) {
          data.unsub_ealerts = 0;
          eloquaPostParameters += '&unsub_ealerts=0';
        } //If user has clicked to follow this journal set the eAlerts frequency to 7 days, else set to 0 (off)


        if (!this.isSelected) {
          //Set 2 of the 3 journal fields in local storage commit
          data[this.id + '_news'] = 1; //Set 3rd journal field in local storage commit

          data[this.id + '_asap'] = 7;
        } else {
          //Set 2 of the 3 journal fields in local storage commit
          data[this.id + '_news'] = 0; //Set 3rd journal field in local storage commit

          data[this.id + '_asap'] = 0;
        } //Get journal eloquaPostParams, including those stored in local storage from previous journal following/unfollowing


        eloquaPostParameters += this.addJournalToFollowedJournalsLocalStorage(data);
      } else {
        eloquaPostParameters += '&' + this.id + '=' + eloquaValue; //Add id=value to data, for local storage commit

        data[this.id] = eloquaValue;
      } //If user has just followed this, set unsub_news = 0


      if (!this.isSelected) {
        data.unsub_news = 0;
        eloquaPostParameters += '&unsub_news=0';
      }

      console.log(eloquaPostParameters); //Commit data to local storage

      setTimeout(function () {
        _this.$store.commit('localStorage/updateUserData', data); //Push code of this media item to last)last_interacted_media in local storage


        if (eloquaValue == 1) {
          _this.$store.commit('localStorage/updateUserLastInteractedMedia', _this.id);
        }
      }, 1500); //Post data to Eloqua

      axios_default.a.post(this.eloqua.formaction + '?' + eloquaPostParameters).then(function (response) {//console.log(response);
      }).catch(function (error) {//console.log(error);
      });
      this.isSelected = !this.isSelected; //Hide card once animation finishes

      setTimeout(function () {
        //If this card is set to fade out on click, set 'hide_card' to true so the card is removed (because of the v-if on .card)
        if (_this.fade_out_on_click) {
          _this.hide_card = true;
        }
      }, 1500);
    }
  },
  data: function data() {
    return {
      isSelected: 0,
      hide_card: false
    };
  }
});
// CONCATENATED MODULE: ./components/card.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_cardvue_type_script_lang_js_ = (cardvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(15);

// CONCATENATED MODULE: ./components/card.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  components_cardvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* harmony default export */ var components_card = __webpack_exports__["a"] = (component.exports);

/***/ }),

/***/ 400:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./components/listing.vue?vue&type=template&id=2f983550&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:"listing",class:_vm.is_selected && _vm.user.status === 'signedin' ? 'listing--active' : (_vm.selectable_listing ? 'listing--inactive' : ''),attrs:{"data-id":_vm.id},on:{"click":function($event){_vm.selectable_listing ? (_vm.user.status === 'signedin' ? _vm.followOrUnfollow() : _vm.$store.commit('signin/toggleSigninModal', {show_modal: true})) : ''}}},[_c('div',{staticClass:"listing__inner"},[(_vm.icon)?_c('div',{staticClass:"listing__icon"},[_c('img',{attrs:{"src":_vm.icon,"alt":""}})]):_vm._e(),_vm._v(" "),_c('div',{staticClass:"listing__content"},[(_vm.label)?_c('p',{staticClass:"listing__label",domProps:{"innerHTML":_vm._s(_vm.label)}}):_vm._e(),_vm._v(" "),(_vm.title)?_c('h6',{staticClass:"listing__title",domProps:{"innerHTML":_vm._s(_vm.title)}}):_vm._e(),_vm._v(" "),(_vm.text)?_c('p',{staticClass:"listing__text",domProps:{"innerHTML":_vm._s(_vm.text)}}):_vm._e()]),_vm._v(" "),(_vm.selectable_listing)?_c('button',{staticClass:"listing__plus",attrs:{"id":_vm.is_selected ? 'unfollow-' + _vm.media_type : 'follow-' + _vm.media_type}},[_c('span',{staticClass:"listing__plus__icon"})]):_vm._e(),_vm._v(" "),_c('div',{staticClass:"listing__cta",class:_vm.button_text === 'Unfollow' ? 'listing__cta--large' : ''},[(_vm.cta_text)?_c('nuxt-link',{staticClass:"listing__cta__button",attrs:{"to":_vm.url},domProps:{"innerHTML":_vm._s(_vm.cta_text)}}):_vm._e(),_vm._v(" "),(_vm.is_selected && _vm.button_text === 'Unfollow')?_c('button',{staticClass:"listing__cta__button",attrs:{"id":_vm.media_type ? 'unfollow-' + _vm.media_type : ''},on:{"click":function($event){return _vm.followOrUnfollow()}}},[_vm._v("\n                Confirm & Unfollow\n            ")]):_vm._e(),_vm._v(" "),(_vm.button_text)?_c('button',{staticClass:"listing__cta__button",class:_vm.button_class,domProps:{"innerHTML":_vm._s(_vm.is_selected ? 'Cancel' : _vm.button_text)},on:{"click":function($event){return _vm.toggleListing()}}}):_vm._e()],1)])])}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/listing.vue?vue&type=template&id=2f983550&

// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js
var es7_object_get_own_property_descriptors = __webpack_require__(36);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.symbol.js
var es6_symbol = __webpack_require__(16);

// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom.iterable.js
var web_dom_iterable = __webpack_require__(12);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.keys.js
var es6_object_keys = __webpack_require__(26);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(0);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.regexp.to-string.js
var es6_regexp_to_string = __webpack_require__(22);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.date.to-string.js
var es6_date_to_string = __webpack_require__(23);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.to-string.js
var es6_object_to_string = __webpack_require__(6);

// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js
var vuex_esm = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/axios/index.js
var axios = __webpack_require__(8);
var axios_default = /*#__PURE__*/__webpack_require__.n(axios);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./components/listing.vue?vue&type=script&lang=js&









function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty["a" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//


/* harmony default export */ var listingvue_type_script_lang_js_ = ({
  props: {
    selectable_listing: {
      default: false
    },
    is_active: false,
    id: '',
    icon: '',
    media_type: '',
    button_text: '',
    button_class: '',
    cta_text: '',
    url: {
      default: '',
      type: String
    },
    label: '',
    title: {
      type: String
    },
    text: {
      type: String
    }
  },
  methods: {
    toggleListing: function toggleListing() {
      switch (this.media_type) {
        case "curated_journal":
          {
            var eloquaValue = this.$store.state.localStorage.user.data[this.id] ? 0 : 1,
                data = {},
                eloquaPostParameters = 'elqFormName=' + this.eloqua.formname + '&elqSiteId=' + this.eloqua.siteid + '&emailAddress=' + this.$store.state.localStorage.user.data.emailaddress; //If user is not following this, set is_selected to show confirm & unfollow button

            if (eloquaValue != 1) {
              this.is_selected = !this.is_selected;
              this.button_text = 'Unfollow';
            } //else post data to eloqua/user storage
            else {
                data[this.id] = eloquaValue; //Get journal eloquaPostParams, including those stored in local storage from previous journal following/unfollowing

                eloquaPostParameters += this.addJournalToFollowedJournalsLocalStorage(data); //Set data in local storage (set not update as we may be adding this property to local storage data for the first time)

                this.$store.commit('localStorage/setReactiveUserDataProperty', this.id);
                console.log(eloquaPostParameters); //Post data to Eloqua

                axios_default.a.post(this.eloqua.formaction + '?' + eloquaPostParameters).then(function (response) {//console.log(response);
                }).catch(function (error) {//console.log(error);
                });
              }

            break;
          }

        default:
          {
            this.is_selected = !this.is_selected;
            break;
          }
      }
    },
    followOrUnfollow: function followOrUnfollow() {
      switch (this.media_type) {
        case "citation":
          {
            if (this.id) {
              var eloquaPostParameters = 'elqFormName=' + this.eloqua.formname + '&elqSiteId=' + this.eloqua.siteid + '&emailAddress=' + this.$store.state.localStorage.user.data.emailaddress;
              eloquaPostParameters += '&citation_id_1=' + this.id + '&citation_freq_1=0';
              this.$store.commit('localStorage/unfollowCitation', this.id.toString());
              console.log(eloquaPostParameters); //Post data to Eloqua

              axios_default.a.post(this.eloqua.formaction + '?' + eloquaPostParameters).then(function (response) {}).catch(function (error) {});
            }

            break;
          }
        //Other media...e.g. interests & newsletters

        default:
          {
            var eloquaValue = !this.is_selected ? 1 : 0,
                data = {},
                _eloquaPostParameters = 'elqFormName=' + this.eloqua.formname + '&elqSiteId=' + this.eloqua.siteid + '&emailAddress=' + this.$store.state.localStorage.user.data.emailaddress; //If user has just followed this, set unsub_news = 0


            if (!this.is_selected) {
              data.unsub_news = 0;
              _eloquaPostParameters += '&unsub_news=0';
            }

            data[this.id] = eloquaValue;

            if (this.media_type === 'curated_journal') {
              //Get journal eloquaPostParams, including those stored in local storage from previous journal following/unfollowing
              _eloquaPostParameters += this.addJournalToFollowedJournalsLocalStorage(data);
            } else {
              _eloquaPostParameters += '&' + this.id + '=' + eloquaValue;
            } //Commit data to local storage


            this.$store.commit('localStorage/updateUserData', data);
            console.log(_eloquaPostParameters); //Post data to Eloqua

            axios_default.a.post(this.eloqua.formaction + '?' + _eloquaPostParameters).then(function (response) {//console.log(response);
            }).catch(function (error) {//console.log(error);
            });
            this.is_selected = !this.is_selected; //Emit the data for this to the parent - so the card can be put back in when a user unfollows this media item

            if (this.id) {
              var _data = {
                image: this.icon,
                name: this.title,
                code: this.id,
                media_type: this.media_type
              };
              this.$emit('unfollowListing', _data);
            }

            break;
          }
      }
    }
  },
  computed: _objectSpread(_objectSpread({}, Object(vuex_esm["b" /* mapState */])({
    user: function user(state) {
      return state.localStorage.user;
    }
  })), {}, {
    eloqua: function eloqua() {
      return this.$store.state.localStorage.eloqua;
    }
  }),
  data: function data() {
    return {
      is_selected: this.is_active
    };
  }
});
// CONCATENATED MODULE: ./components/listing.vue?vue&type=script&lang=js&
 /* harmony default export */ var components_listingvue_type_script_lang_js_ = (listingvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(15);

// CONCATENATED MODULE: ./components/listing.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  components_listingvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* harmony default export */ var listing = __webpack_exports__["a"] = (component.exports);

/***/ }),

/***/ 407:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./pages/_code.vue?vue&type=template&id=36d896d5&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(this.$route.query.ifr)?_c('div',{staticClass:"iframe iframe--media-follow"},[_c('div',{staticClass:"iframe__close",on:{"click":function($event){return _vm.iframeClose($event);}}}),_vm._v(" "),(this.mediaType === 'journal' || this.mediaType === 'curated_journal' && !_vm.showPromotedFollowSuccess)?_c('div',{staticClass:"iframe__inner"},[(_vm.getMediaTypeInfo().label)?_c('p',{staticClass:"sub-title text-md margin-bottom-1",domProps:{"innerHTML":_vm._s(_vm.getMediaTypeInfo().label)}}):_vm._e(),_vm._v(" "),_c('div',{staticClass:"iframe__title styled-content"},[_c('p',[(_vm.current_post.name)?_c('strong',{domProps:{"innerHTML":_vm._s(_vm.current_post.name)}}):_vm._e()])]),_vm._v(" "),(this.mediaType === 'journal' && !_vm.showPromotedFollowSuccess)?_c('p',{staticClass:"text-md"},[_vm._v("Follow this journal for a weekly email digest of new articles and occasional news.")]):_vm._e(),_vm._v(" "),(this.mediaType === 'curated_journal' && !_vm.showPromotedFollowSuccess)?_c('p',{staticClass:"text-md",domProps:{"innerHTML":_vm._s(_vm.current_post.text)}}):_vm._e()]):_vm._e(),_vm._v(" "),(this.mediaType === 'newsletter' || this.mediaType === 'interest')?_c('div',[_c('section',{staticClass:"hero hero--var-1"},[(_vm.mediaType === 'journal')?_c('div',{staticClass:"hero__gallery"},[_c('ul',{staticClass:"screens-gallery__inner card__screens-gallery__inner"},_vm._l((_vm.getRequiredAmountOfImages(_vm.current_post.images)),function(image){return _c('li',[_c('img',{attrs:{"src":image,"alt":_vm.current_post.name + ' cover image'}})])}),0)]):_vm._e(),_vm._v(" "),(_vm.mediaType === 'interest')?_c('div',{staticClass:"hero__image",style:({ backgroundImage: 'url(' + _vm.current_post.images[1] + ')' })}):_vm._e(),_vm._v(" "),(_vm.mediaType === 'newsletter' || _vm.mediaType === 'curated_journal')?_c('div',{staticClass:"hero__image hero__image--placeholder"}):_vm._e()]),_vm._v(" "),_c('div',{staticClass:"iframe__inner"},[_c('ul',{staticClass:"cards cards--offset-top cards--var-1 margin-bottom-4"},[_c('Card',_vm._b({},'Card',{
                            selectable_card: 0,
                            card_class: 'col--12 col--12--offset-top',
                            image: _vm.getMediaTypeInfo().logo,
                            label: _vm.getMediaTypeInfo().label,
                            title: _vm.current_post.name
                        },false))],1)])]):_vm._e(),_vm._v(" "),(!_vm.showPromotedFollowSuccess)?_c('form',{staticClass:"iframe__inner margin-top-3",on:{"submit":function($event){return _vm.submitPromotedFollow($event, true)}}},[_c('div',{staticClass:"form-row form-row--lg-field"},[_vm._m(0),_vm._v(" "),_c('div',{staticClass:"form-row__field input-gradient"},[_c('input',{staticClass:"input input--bordered",attrs:{"id":"signin-email-iframe","name":"email_address","type":"email","required":""}}),_vm._v(" "),_c('label',{staticClass:"placeholder-label",attrs:{"for":"signin-email-iframe"}},[_c('svg',{attrs:{"width":"18px","height":"14px","viewBox":"0 0 11 9","version":"1.1","xmlns":"http://www.w3.org/2000/svg"}},[_c('path',{attrs:{"d":"M9.79596722,10.0132164 L1.9592326,10.0132164 C1.42045709,10.0132164 0.97964077,9.57240007 0.97964077,9.03362455 L0.97964077,3.15607347 C0.97964077,2.61729796 1.42045709,2.17648163 1.9592326,2.17648163 L9.79596722,2.17648163 C10.3347427,2.17648163 10.775559,2.61729796 10.775559,3.15607347 L10.775559,9.03362455 C10.775559,9.57240007 10.3347427,10.0132164 9.79596722,10.0132164 L9.79596722,10.0132164 Z M9.79596739,8.05403246 L5.8776,5.60505295 L1.95923262,8.05403246 L1.95923262,9.03362427 L5.8776,6.58464475 L9.79596739,9.03362427 L9.79596739,8.05403246 L9.79596739,8.05403246 Z","id":"Shape","fill":"#0A6FE2","transform":"translate(5, 4) scale(1, -1) translate(-5.877600, -6.094849) "}})]),_vm._v("\n                        Email\n                    ")])])]),_vm._v(" "),(this.mediaType === 'journal' || this.mediaType === 'curated_journal')?_c('p',{staticClass:"text-sm margin-top-3"},[_vm._v("By following this journal you are opting to receive email about related products and services from ACS Publications (American Chemical Society) in accordance with the "),_c('a',{attrs:{"href":"https://www.acs.org/content/acs/en/privacy.html","target":"_blank"}},[_vm._v("privacy policy")])]):_vm._e(),_vm._v(" "),(this.mediaType === 'newsletter' || this.mediaType === 'interest')?_c('p',{staticClass:"text-sm margin-top-3"},[_vm._v("By following this "+_vm._s(this.mediaType)+", you are opting in to receive emails about ACS Publications on behalf of the American Chemical Society. We will send you relevant emails based on this preference and any others you select or information you provide to us. You can modify or remove your preferences at any time.")]):_vm._e(),_vm._v(" "),_c('div',{staticClass:"form-row form-row--button"},[_c('button',{staticClass:"button button--primary button--primary--pcolor-bright"},[_c('img',{staticClass:"button__loading-spinner",attrs:{"src":"https://pubs.acs.org/pb-assets/images/preference-center/loading-spinner.svg","id":"followButtonLoadingSpinner","alt":"Loading Spinner"}}),_vm._v(" Follow "+_vm._s(_vm.mediaType === 'curated_journal' ? _vm.current_post.name : _vm.getMediaTypeInfo().label)+"\n                ")])])]):_vm._e(),_vm._v(" "),(_vm.showPromotedFollowSuccess)?_c('div',{staticClass:"iframe__inner margin-top-5"},[_c('h3',{staticClass:"sidebar-content__title"},[_vm._v("Nearly there, we've sent you an email.")]),_vm._v(" "),_c('div',{staticClass:"sidebar-content__text styled-content"},[_c('p',{staticClass:"margin-top-1"},[_vm._v("We’ve sent you an email to confirm you would like to follow "+_vm._s(this.current_post.name)+".")]),_vm._v(" "),_c('p',{staticClass:"margin-top-2"},[_c('strong',[_vm._v("Please click the link in the email to start following this "+_vm._s(_vm.getMediaTypeInfo().label)+" and sign into the ACS publications preference centre.")])])])]):_vm._e()]):_vm._e(),_vm._v(" "),(!this.$route.query.ifr)?_c('div',[_c('Header',_vm._b({},'Header',{
            activeNav: _vm.getMediaTypeInfo().label_plural ? _vm.getMediaTypeInfo().label_plural.toLowerCase() : ''
        },false)),_vm._v(" "),_c('div',{staticClass:"sidebar-wrapper wrapper bg-white theme-1"},[_c('Sidebar',_vm._b({},'Sidebar',{
                    sidebar_class: 'sidebar--hide-info-on-tablet',
                    cta_link: _vm.getMediaTypeInfo().cta_link,
                    label: _vm.getMediaTypeInfo().label_plural,
                    title: _vm.following ? _vm.getMediaTypeInfo().sidebar_following_title : _vm.getMediaTypeInfo().sidebar_unfollowing_title,
                    text: _vm.following ? _vm.getMediaTypeInfo().sidebar_following_text : _vm.getMediaTypeInfo().sidebar_unfollowing_text
                },false)),_vm._v(" "),(_vm.showGenericSuccess && !this.$route.query.manage)?_c('div',{staticClass:"sidebar-content"},[_c('div',{staticClass:"sidebar-content__inner sidebar-content__padding-top sidebar-content__padding-bottom"},[_c('h1',{staticClass:"sidebar-content__title"},[_vm._v("Thank you")]),_vm._v(" "),(_vm.user.status === 'signedin')?_c('div',{staticClass:"sidebar-content__text styled-content"},[_c('p',{staticClass:"margin-top-1"},[_c('strong',[_vm._v("We’ve updated your preferences and sent an email confirming these changes to:")]),_c('br'),_c('br'),_vm._v("\n\n                            "+_vm._s(_vm.user.data.emailaddress)+"\n                        ")])]):_vm._e()]),_vm._v(" "),_c('div',{staticClass:"sidebar-content__cta sidebar-content__inner border-top-grey"},[_c('h3',{staticClass:"sidebar-content__cta__title"},[_vm._v("Find more relevant emails")]),_vm._v(" "),_c('nuxt-link',{staticClass:"button button--secondary button--secondary--pcolor-bright",attrs:{"to":"/","exact":""}},[_vm._v("My recommendations")])],1)]):_vm._e(),_vm._v(" "),(_vm.showGenericSuccess && this.$route.query.manage)?_c('div',{staticClass:"sidebar-content"},[_c('div',{staticClass:"sidebar-content__inner sidebar-content__padding-top sidebar-content__padding-bottom"},[_c('h1',{staticClass:"sidebar-content__title"},[_vm._v("You’ve unfollowed these emails")]),_vm._v(" "),(_vm.user.status === 'signedin')?_c('div',{staticClass:"sidebar-content__text styled-content"},[_c('p',{staticClass:"margin-top-1"},[_c('strong',[_vm._v("We’ve updated your preferences for the below email address, you will no longer receive these emails:")]),_c('br'),_c('br'),_vm._v("\n\n                            "+_vm._s(_vm.user.data.emailaddress)+"\n                        ")])]):_vm._e()]),_vm._v(" "),_c('div',{staticClass:"sidebar-content__cta sidebar-content__inner border-top-grey"},[_c('h3',{staticClass:"sidebar-content__cta__title"},[_vm._v("Find more relevant emails")]),_vm._v(" "),_c('nuxt-link',{staticClass:"button button--secondary button--secondary--pcolor-bright",attrs:{"to":"/","exact":""}},[_vm._v("My recommendations")])],1)]):_vm._e(),_vm._v(" "),(!_vm.showGenericSuccess)?_c('div',{staticClass:"sidebar-content"},[_c('section',{staticClass:"hero hero--var-1"},[(_vm.mediaType === 'journal')?_c('div',{staticClass:"hero__gallery"},[_c('ul',{staticClass:"screens-gallery__inner card__screens-gallery__inner"},_vm._l((_vm.getRequiredAmountOfImages(_vm.current_post.images)),function(image){return _c('li',[_c('img',{attrs:{"src":image,"alt":_vm.current_post.name + ' cover image'}})])}),0)]):_vm._e(),_vm._v(" "),(_vm.mediaType === 'interest')?_c('div',{staticClass:"hero__image",style:({ backgroundImage: 'url(' + _vm.current_post.images[1] + ')' })}):_vm._e(),_vm._v(" "),(_vm.mediaType === 'newsletter' || _vm.mediaType === 'curated_journal')?_c('div',{staticClass:"hero__image hero__image--placeholder"}):_vm._e()]),_vm._v(" "),_c('div',{staticClass:"sidebar-content__inner sidebar-content__padding-bottom"},[_c('ul',{staticClass:"cards cards--offset-top cards--var-1"},[_c('Card',_vm._b({},'Card',{
                                selectable_card: 0,
                                card_class: 'col--12 col--12--offset-top',
                                image: _vm.getMediaTypeInfo().logo,
                                label: _vm.getMediaTypeInfo().label,
                                title: _vm.current_post.name
                            },false))],1),_vm._v(" "),(_vm.user.status === 'signedin' && this.$route.query.manage)?_c('div',{staticClass:"margin-top-6 sidebar-content__text"},[_c('h6',[_vm._v("You have received an email from this "+_vm._s(_vm.getMediaTypeInfo().label_lc)+" because it relates to topics in which you expressed an interest or ACS Publications services you have used.")]),_vm._v(" "),_c('p',{staticClass:"margin-top-4"},[_vm._v("Stop receiving emails from this "+_vm._s(_vm.getMediaTypeInfo().label_lc)+" by clicking the button below.")]),_vm._v(" "),_c('button',{staticClass:"button button--primary button--primary--pcolor-bright margin-top-4",on:{"click":function($event){return _vm.stopRelatedEmailsForThisMedia()}}},[_vm._v("\n                            Don't send me emails related to this "+_vm._s(_vm.getMediaTypeInfo().label)+"\n                        ")])]):_vm._e(),_vm._v(" "),(_vm.user.status === 'signedin' && !this.$route.query.manage)?_c('div',[(_vm.mediaType === 'journal')?_c('div',[_c('ul',{staticClass:"listings listings--var-2"},[_c('EditableField',_vm._b({},'EditableField',{
                                        title: 'Get journal news and updates',
                                        text: 'Occasional emails relating to this journal.',
                                        field_type: 'switch',
                                        auto_update_data: false,
                                        field_name: _vm.current_post.code + '_news',
                                        value: _vm.pageView === 'follow' ? 1 : _vm.user.data[_vm.current_post.code + '_news']
                                    },false)),_vm._v(" "),_c('EditableField',_vm._b({},'EditableField',{
                                        title: 'Get an email when a new issue is published',
                                        text: 'A full list of articles for each new issue (table of contents).',
                                        field_type: 'switch',
                                        auto_update_data: false,
                                        field_name: _vm.current_post.code + '_toc',
                                        value: _vm.pageView === 'follow' ? 1 : _vm.user.data[_vm.current_post.code + '_toc']
                                    },false)),_vm._v(" "),_c('EditableField',_vm._b({},'EditableField',{
                                        title: 'Get an email when new articles are published',
                                        text: 'Regular email digest of the very latest published articles (As Soon As Publishable & Just Accepted Manuscripts)',
                                        field_type: 'radio',
                                        auto_update_data: true,
                                        default_active: true,
                                        field_name: _vm.current_post.code + '_asap',
                                        value: _vm.pageView === 'follow' ? 7 : _vm.user.data[_vm.current_post.code + '_asap'],
                                        options: [
                                            {
                                                value: 1,
                                                label: 'Daily'
                                            },
                                            {
                                                value: 7,
                                                label: 'Weekly'
                                            },
                                            {
                                                value: 30,
                                                label: 'Monthly'
                                            },
                                            {
                                                value: 0,
                                                label: 'Off'
                                            }
                                        ]
                                    },false))],1)]):_vm._e(),_vm._v(" "),(_vm.mediaType !== 'journal')?_c('div',[_c('div',{staticClass:"tb-centered sidebar-content__padding-top-sm"},[_c('h5',{staticClass:"sidebar-content__title",domProps:{"innerHTML":_vm._s(_vm.following ? 'You are currently following this ' + _vm.getMediaTypeInfo().label_lc : 'Follow this ' + _vm.getMediaTypeInfo().label_lc)}}),_vm._v(" "),_c('div',{staticClass:"sidebar-content__text styled-content"},[(_vm.following)?_c('p',[_vm._v(_vm._s(_vm.getMediaTypeInfo().main_following_text))]):_vm._e(),_vm._v(" "),(!_vm.following)?_c('p',[_vm._v(_vm._s(_vm.getMediaTypeInfo().main_unfollowing_text))]):_vm._e()])])]):_vm._e(),_vm._v(" "),(_vm.user.status === 'signedin')?_c('div',{staticClass:"tb-centered sidebar-content__signedin-info text-md border-top-grey padding-top-4"},[_vm._m(1),_vm._v(" "),_c('p',{staticClass:"opacity-60 margin-top-1"},[_vm._v(_vm._s(_vm.user.data.emailaddress))]),_vm._v(" "),_c('p',{staticClass:"margin-top-1"},[_c('span',{staticClass:"text-sm text-link",attrs:{"id":"not-you"},on:{"click":function($event){return _vm.signUserOut();}}},[_vm._v("Not you?")])])]):_vm._e(),_vm._v(" "),_c('div',{staticClass:"tb-centered"},[(_vm.mediaType === 'journal')?_c('button',{staticClass:"button button--primary button--primary--pcolor-bright margin-top-6",attrs:{"id":_vm.user.data[_vm.current_post.code + '_asap'] == 0 && _vm.user.data[_vm.current_post.code + '_toc'] == 0 && _vm.user.data[_vm.current_post.code + '_news'] == 0 ? 'journal-unfollow' : 'journal-follow',"disabled":_vm.pageView === 'follow' && _vm.user.data[_vm.current_post.code + '_asap'] == 0 && _vm.user.data[_vm.current_post.code + '_toc'] == 0 && _vm.user.data[_vm.current_post.code + '_news'] == 0 ? true : false},domProps:{"innerHTML":_vm._s(_vm.pageView ==='follow' ? 'Follow journal' : (_vm.user.data[_vm.current_post.code + '_asap'] == 0 && _vm.user.data[_vm.current_post.code + '_toc'] == 0 && _vm.user.data[_vm.current_post.code + '_news'] == 0 ? 'Save and unfollow' : 'Save changes'))},on:{"click":function($event){return _vm.followOrUnfollow()}}}):_vm._e(),_vm._v(" "),(_vm.mediaType !== 'journal')?_c('button',{staticClass:"button button--primary button--primary--pcolor-bright  margin-top-4",attrs:{"id":_vm.following ? _vm.mediaType + '-unfollow' : _vm.mediaType + '-follow'},domProps:{"innerHTML":_vm._s(((_vm.following ? 'Unfollow ' : 'Follow ') + (_vm.mediaType === 'curated_journal' ? _vm.current_post.name : _vm.getMediaTypeInfo().label_lc)))},on:{"click":function($event){return _vm.followOrUnfollow()}}}):_vm._e()])]):_vm._e(),_vm._v(" "),(_vm.user.status !== 'signedin' && this.$route.query.follow)?_c('div',[_c('div',{staticClass:"sidebar-content__padding-top-sm"},[(!_vm.showPromotedFollowSuccess)?_c('div',[_c('h5',{staticClass:"sidebar-content__title"},[_vm._v("Following this "+_vm._s(_vm.getMediaTypeInfo().label_lc))]),_vm._v(" "),_c('div',{staticClass:"sidebar-content__text styled-content"},[_c('p',[_vm._v("By following this "+_vm._s(_vm.getMediaTypeInfo().label_lc)+", you are opting in to receive emails about ACS Publications on behalf of the American Chemical Society. We will send you relevant emails based on this preference and any others you select or information you provide to us. You can modify or remove your preferences at any time.")])]),_vm._v(" "),_c('form',{on:{"submit":function($event){return _vm.submitPromotedFollow($event)}}},[_c('div',{staticClass:"form-row form-row--lg-field"},[_c('div',{staticClass:"form-row__title"},[_vm._v("\n                                            Enter your email address:\n                                        ")]),_vm._v(" "),_c('div',{staticClass:"form-row__field input-gradient"},[_c('input',{staticClass:"input input--bordered",attrs:{"id":"signin-email","name":"email_address","type":"email","required":""}}),_vm._v(" "),_c('label',{staticClass:"placeholder-label",attrs:{"for":"signin-email"}},[_c('svg',{attrs:{"width":"18px","height":"14px","viewBox":"0 0 11 9","version":"1.1","xmlns":"http://www.w3.org/2000/svg"}},[_c('path',{attrs:{"d":"M9.79596722,10.0132164 L1.9592326,10.0132164 C1.42045709,10.0132164 0.97964077,9.57240007 0.97964077,9.03362455 L0.97964077,3.15607347 C0.97964077,2.61729796 1.42045709,2.17648163 1.9592326,2.17648163 L9.79596722,2.17648163 C10.3347427,2.17648163 10.775559,2.61729796 10.775559,3.15607347 L10.775559,9.03362455 C10.775559,9.57240007 10.3347427,10.0132164 9.79596722,10.0132164 L9.79596722,10.0132164 Z M9.79596739,8.05403246 L5.8776,5.60505295 L1.95923262,8.05403246 L1.95923262,9.03362427 L5.8776,6.58464475 L9.79596739,9.03362427 L9.79596739,8.05403246 L9.79596739,8.05403246 Z","id":"Shape","fill":"#0A6FE2","transform":"translate(5, 4) scale(1, -1) translate(-5.877600, -6.094849) "}})]),_vm._v("\n                                                Email\n                                            ")])])]),_vm._v(" "),_c('div',{staticClass:"form-row form-row--button"},[_c('button',{staticClass:"button button--primary button--primary--pcolor-bright"},[_c('img',{staticClass:"button__loading-spinner",attrs:{"src":"https://pubs.acs.org/pb-assets/images/preference-center/loading-spinner.svg","id":"followButtonLoadingSpinner","alt":"Loading Spinner"}}),_vm._v(" Follow "+_vm._s(_vm.mediaType === 'curated_journal' ? _vm.current_post.name : _vm.getMediaTypeInfo().label)+"\n                                        ")])])])]):_vm._e(),_vm._v(" "),(_vm.showPromotedFollowSuccess)?_c('div',[_c('h3',{staticClass:"sidebar-content__title"},[_vm._v("Nearly there, we've sent you an email.")]),_vm._v(" "),_c('div',{staticClass:"sidebar-content__text styled-content"},[_c('p',{staticClass:"margin-top-1"},[_vm._v("We’ve sent you an email to confirm you would like to follow "+_vm._s(this.current_post.name)+".")]),_vm._v(" "),_c('p',{staticClass:"margin-top-2"},[_c('strong',[_vm._v("Please click the link in the email to start following this "+_vm._s(_vm.getMediaTypeInfo().label)+" and sign into the ACS publications preference centre.")])])])]):_vm._e()])]):_vm._e(),_vm._v(" "),(_vm.user.status !== 'signedin' && !this.$route.query.follow)?_c('div',{staticClass:"margin-top-6"},[_c('p',[_c('span',{staticClass:"text-link",on:{"click":function($event){return _vm.openSignInModal()}}},[_vm._v("Sign in")]),_vm._v(" to manage this "+_vm._s(_vm.getMediaTypeInfo().label_lc)+".")])]):_vm._e()])]):_vm._e()],1),_vm._v(" "),_c('Footer')],1):_vm._e()])}
var staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"text-md margin-bottom-2"},[_c('strong',[_vm._v("Enter your email address:")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:"opacity-60"},[_c('strong',[_vm._v("Signed in as:")])])}]


// CONCATENATED MODULE: ./pages/_code.vue?vue&type=template&id=36d896d5&

// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.object.get-own-property-descriptors.js
var es7_object_get_own_property_descriptors = __webpack_require__(36);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.symbol.js
var es6_symbol = __webpack_require__(16);

// EXTERNAL MODULE: ./node_modules/core-js/modules/web.dom.iterable.js
var web_dom_iterable = __webpack_require__(12);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.to-string.js
var es6_object_to_string = __webpack_require__(6);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.object.keys.js
var es6_object_keys = __webpack_require__(26);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es7.array.includes.js
var es7_array_includes = __webpack_require__(39);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.includes.js
var es6_string_includes = __webpack_require__(54);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.function.name.js
var es6_function_name = __webpack_require__(19);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/defineProperty.js
var defineProperty = __webpack_require__(0);

// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js
var runtime = __webpack_require__(47);

// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js
var asyncToGenerator = __webpack_require__(5);

// EXTERNAL MODULE: ./node_modules/core-js/modules/es6.string.starts-with.js
var es6_string_starts_with = __webpack_require__(226);

// EXTERNAL MODULE: ./components/card.vue + 4 modules
var card = __webpack_require__(399);

// EXTERNAL MODULE: ./components/footer.vue + 2 modules
var footer = __webpack_require__(398);

// EXTERNAL MODULE: ./components/header.vue + 4 modules
var header = __webpack_require__(397);

// EXTERNAL MODULE: ./components/editable-field.vue + 4 modules
var editable_field = __webpack_require__(402);

// EXTERNAL MODULE: ./components/listing.vue + 4 modules
var listing = __webpack_require__(400);

// EXTERNAL MODULE: ./components/sidebar.vue + 4 modules
var sidebar = __webpack_require__(396);

// EXTERNAL MODULE: ./assets/config.js
var config = __webpack_require__(31);
var config_default = /*#__PURE__*/__webpack_require__.n(config);

// EXTERNAL MODULE: ./node_modules/vuex/dist/vuex.esm.js
var vuex_esm = __webpack_require__(7);

// EXTERNAL MODULE: ./node_modules/axios/index.js
var axios = __webpack_require__(8);
var axios_default = /*#__PURE__*/__webpack_require__.n(axios);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/_code.vue?vue&type=script&lang=js&













function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty["a" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//









/* harmony default export */ var _codevue_type_script_lang_js_ = ({
  mounted: function mounted() {
    this.updateUserExpiration();
    this.signUserIn();
    this.redirectUserToLastVisitedPage(); //Check whether _asap, _toc and _news are 0 for a journal, if so set data var to say so...used to determine what toast message to show when user updates preferences

    if (this.current_post.type === 'journal' && this.$store.state.localStorage.user.data[this.current_post.code + '_asap'] == 0 && this.$store.state.localStorage.user.data[this.current_post.code + '_toc'] == 0 && this.$store.state.localStorage.user.data[this.current_post.code + '_news'] == 0) {
      this.journal_is_unfollowed = true;
    }

    var currentMediaCode = this.current_post.code; //Set the media type on page load

    this.mediaType = currentMediaCode.startsWith('in_') ? 'interest' : currentMediaCode.startsWith('nw_') ? 'newsletter' : this.current_post.type === 'curated_journal' ? 'curated_journal' : 'journal'; //Set whether the user is following this (only when on an interest or newsletter as journals have 3 fields) based on whether it's set to 1 in Eloqua

    if (this.$store.state.localStorage.user.data[currentMediaCode] == 1 || this.$store.state.localStorage.user.data[currentMediaCode + '_news'] == 1 || this.$store.state.localStorage.user.data[currentMediaCode + '_asap'] == 1 || this.$store.state.localStorage.user.data[currentMediaCode + '_toc'] == 1) {
      this.following = true;
    } //If follow=1 is passed, set the view to the user wanting to follow


    if (this.$route.query.follow) {
      this.pageView = 'follow';
    }
  },
  asyncData: function asyncData(_ref) {
    return Object(asyncToGenerator["a" /* default */])( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {
      var params, error, journal, currentPost;
      return regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              params = _ref.params, error = _ref.error;
              _context.next = 3;
              return axios_default.a.get("".concat(config_default.a.api_endpoints.data));

            case 3:
              journal = _context.sent;
              //Filter correct current post
              currentPost = journal.data.filter(function (jsonItem) {
                if ((jsonItem.type === 'journal' || jsonItem.type === 'curated_journal' || jsonItem.type === 'interest' || jsonItem.type === 'news') && jsonItem.code === params.code) {
                  return true;
                }
              });

              if (!currentPost[0]) {
                _context.next = 9;
                break;
              }

              return _context.abrupt("return", {
                current_post: currentPost[0]
              });

            case 9:
              error({
                statusCode: 404
              });

            case 10:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }))();
  },
  computed: _objectSpread(_objectSpread({}, Object(vuex_esm["b" /* mapState */])({
    user: function user(state) {
      return state.localStorage.user;
    }
  })), {}, {
    eloqua: function eloqua() {
      return this.$store.state.localStorage.eloqua;
    }
  }),
  components: {
    Card: card["a" /* default */],
    EditableField: editable_field["a" /* default */],
    Footer: footer["a" /* default */],
    Header: header["a" /* default */],
    Listing: listing["a" /* default */],
    Sidebar: sidebar["a" /* default */]
  },
  methods: {
    getRequiredAmountOfImages: function getRequiredAmountOfImages(images) {
      if (images.length < 8) {
        images.push(images[images.length - 4]);
      }

      return images;
    },
    getMediaTypeInfo: function getMediaTypeInfo() {
      var info = {};

      switch (this.mediaType) {
        case 'curated_journal':
          {
            info.label_plural = 'Journals';
            info.label = 'Curated journal alert';
            info.label_lc = 'curated journal alert';
            info.logo = this.current_post.logo;
            info.main_following_text = 'You have selected this curated journal alert as one of your preferences, and will receive emails at the email address linked to this profile.';
            info.main_unfollowing_text = 'Click on the button below to start following this curated content. You can edit this preference at any time from your profile or directly from an email.';
            info.sidebar_following_title = 'Update your choices.';
            info.sidebar_following_text = 'Manage your follow settings for an individual curated journal alert and tailor your ACS experience to better suit your needs.';
            info.sidebar_unfollowing_title = 'Get ACS curated journal alerts';
            info.sidebar_unfollowing_text = '';
            info.cta_link = '/journals';
            break;
          }

        case 'journal':
          {
            info.label_plural = 'Journals';
            info.label = 'Journal';
            info.label_lc = 'journal';
            info.logo = this.current_post.logo;
            info.sidebar_following_title = 'Update your choices.';
            info.sidebar_following_text = 'Manage your follow settings for an individual journal and tailor your ACS experience to better suit your needs.';
            info.sidebar_unfollowing_title = this.$route.query.manage ? 'Manage this journal.' : 'Follow this journal.';
            info.sidebar_unfollowing_text = 'Manage your email preferences for following this journal, and tailor your ACS Publications experience to better suit you.';
            info.cta_link = '/journals';
            break;
          }

        case 'newsletter':
          {
            info.label_plural = 'Newsletters';
            info.label = 'Newsletter';
            info.label_lc = 'newsletter';
            info.logo = 'https://pubs.acs.org/pb-assets/images/preference-center/newsletter.svg';
            info.main_following_text = 'You have selected this newsletter as one of your preferences, and will receive emails at the email address linked to this profile.';
            info.main_unfollowing_text = 'Click on the button below to start following this newsletter. You can edit this preference at any time from your profile or directly from an email.';
            info.sidebar_following_title = 'Update your choices.';
            info.sidebar_following_text = 'Manage your follow settings for an individual newsletter and tailor your ACS Publications experience.';
            info.sidebar_unfollowing_title = this.$route.query.manage ? 'Manage this newsletter.' : 'Follow this newsletter.';
            info.sidebar_unfollowing_text = 'Newsletters are a great way to stay up to date on content, products and services offered by ACS Publications.';
            info.cta_link = '/newsletters';
            break;
          }

        case 'interest':
          {
            info.label_plural = 'Interests';
            info.label = 'Interest';
            info.label_lc = 'interest';
            info.logo = 'https://pubs.acs.org/pb-assets/images/preference-center/interest.svg';
            info.main_unfollowing_text = 'By selecting this interest you will start receiving occasional updates by email about related journals, content, events and more.';
            info.main_following_text = 'You are currently set to receive emails relating to this interest. You can edit this preference at any time from your profile or directly from an email.';
            info.sidebar_following_title = 'Update your choices.';
            info.sidebar_following_text = 'Manage your email preference settings for interests and tailor your ACS experience to better suit your needs.';
            info.sidebar_unfollowing_title = this.$route.query.manage ? 'Manage this interest.' : 'Follow this interest.';
            info.sidebar_unfollowing_text = 'Manage your email preference settings for an individual interest and tailor your ACS Publications experience.';
            info.cta_link = '/interests';
            break;
          }
      }

      return info;
    },
    stopRelatedEmailsForThisMedia: function stopRelatedEmailsForThisMedia() {
      var data = {},
          eloquaPostParameters = 'elqFormName=' + this.eloqua.formname + '&elqSiteId=' + this.eloqua.siteid + '&emailAddress=' + this.$store.state.localStorage.user.data.emailaddress;

      if (this.mediaType === 'journal') {
        eloquaPostParameters += '&' + this.current_post.code + '_news=0'; //Set data to post to Eloqua

        data[this.current_post.code + '_news'] = 0;
      } else {
        //Set data for Eloqua
        eloquaPostParameters += '&' + this.current_post.code + '=0'; //Set data to post to Eloqua

        data[this.current_post.code] = 0;
      } //Update users data in local storage


      this.$store.commit('localStorage/updateUserData', data);
      console.log(eloquaPostParameters); //Post data to Eloqua

      axios_default.a.post(this.eloqua.formaction + '?' + eloquaPostParameters).then(function (response) {}).catch(function (error) {});
      this.showGenericSuccess = true;
    },
    followOrUnfollow: function followOrUnfollow() {
      var eloquaValue = this.following ? 0 : 1,
          data = {},
          eloquaPostParameters = 'elqFormName=' + this.eloqua.formname + '&elqSiteId=' + this.eloqua.siteid + '&emailAddress=' + this.$store.state.localStorage.user.data.emailaddress,
          journalParams = '';

      if (this.mediaType === 'journal') {
        //If user has just followed this journal, set unsub_ealerts = 0
        if (!this.following) {
          data.unsub_ealerts = 0;
          eloquaPostParameters += '&unsub_ealerts=0';
        } //Set data to post to Eloqua


        data[this.current_post.code + '_asap'] = this.$store.state.localStorage.user.data[this.current_post.code + '_asap'];
        data[this.current_post.code + '_toc'] = this.$store.state.localStorage.user.data[this.current_post.code + '_toc'];
        data[this.current_post.code + '_news'] = this.$store.state.localStorage.user.data[this.current_post.code + '_news'];
      } else {
        //Set data for Eloqua
        eloquaPostParameters += '&' + this.current_post.code + '=' + eloquaValue; //Set data to post to Eloqua

        data[this.current_post.code] = eloquaValue;
      }

      if (this.mediaType === 'journal' || this.mediaType === 'curated_journal') {
        //Get journal/curated journal eloquaPostParams, including those stored in local storage from previous journal following/unfollowing
        eloquaPostParameters += this.addJournalToFollowedJournalsLocalStorage(data);
      } //If user has just followed this, set unsub_news = 0


      if (!this.following) {
        data.unsub_news = 0;
        eloquaPostParameters += '&unsub_news=0';
      } //Update users data in local storage


      this.$store.commit('localStorage/updateUserData', data);
      console.log(eloquaPostParameters); //Post data to Eloqua

      axios_default.a.post(this.eloqua.formaction + '?' + eloquaPostParameters).then(function (response) {}).catch(function (error) {}); //Redirect user back to the landing page for this type of media

      if (this.mediaType === 'journal') {
        //Set the following data variable to false if _asap, _news & _toc all set to 0
        if (!this.journal_is_unfollowed || this.$store.state.localStorage.user.data[this.current_post.code + '_asap'] == 0 && this.$store.state.localStorage.user.data[this.current_post.code + '_toc'] == 0 && this.$store.state.localStorage.user.data[this.current_post.code + '_news'] == 0) {
          this.$router.push(this.getMediaTypeInfo().cta_link + '?prefupdate=1');
        } else {
          this.$router.push(this.getMediaTypeInfo().cta_link + '?preffollow=' + this.current_post.name);
        }
      } else {
        //Set the following data variable to false if this pref set to 0
        if (this.$store.state.localStorage.user.data[this.current_post.code] == 0) {
          this.$router.push(this.getMediaTypeInfo().cta_link + '?prefupdate=1');
        } else {
          this.$router.push(this.getMediaTypeInfo().cta_link + '?preffollow=' + this.current_post.name);
        }
      }
    },
    //Fire this when closing a media iFrame
    iframeClose: function iframeClose() {
      var message = '{"result":"success", "message":"' + this.iframeMessage + '"}';
      console.log(message);
      window.parent.postMessage(message, '*');
    },
    openSignInModal: function openSignInModal() {
      this.$store.commit('signin/toggleSigninModal', {
        show_modal: true
      });
    },
    //
    //Promoted follow - user can follow the media
    //@param string event - Event - The Vue event object
    //@param boolean viaIframe - pass this if firing this event in the media iFrames
    //
    submitPromotedFollow: function submitPromotedFollow(event, viaIframe) {
      var _this = this;

      if (event) event.preventDefault(); //Show loading spinner

      document.getElementById('followButtonLoadingSpinner').style.display = 'inline-block'; //Set email_address data to users email

      this.email_address = event.target.elements["email_address"].value; //Set Eloqua post data

      var eloquaPostParameters = 'elqFormName=' + this.eloqua.formname_check_user + '&elqSiteId=' + this.eloqua.siteid;
      var followMediaEloquaPostParameters = '&emailAddress=' + this.email_address + '&prefname=' + encodeURIComponent(this.current_post.name) + '&prefcode=' + this.current_post.code; //Add the specific 'follow media' parameters to eloquaPostParameters

      eloquaPostParameters += followMediaEloquaPostParameters; //Add iframe param if this even is fired via the iFrames)

      if (viaIframe) {
        eloquaPostParameters += '&iframe=1';
        this.iframeMessage = 'Please check your email to confirm your new alert.';
      }

      console.log(eloquaPostParameters); //Post data to Eloqua

      axios_default.a.post(this.eloqua.formaction_check_user + '?' + eloquaPostParameters).then(function (response) {
        //Hide loading spinner
        document.getElementById('followButtonLoadingSpinner').style.display = 'none'; //Show sign up modal if user does not exist in Eloqua (if we're not firing this event via the iFrames)

        if (!viaIframe && !response.data.includes('existinguser')) {
          _this.$store.commit('signin/toggleSigninModal', {
            modal_section: 'not-exists',
            show_modal: true,
            modal_new_user_extra_eloqua_params: followMediaEloquaPostParameters
          });
        } else {
          _this.showPromotedFollowSuccess = true;
        }
      });
    }
  },
  head: function head() {
    return {
      title: 'ACS Preference Center'
    };
  },
  data: function data() {
    return {
      mediaType: '',
      iframeMessage: 'Alert not registered.',
      following: false,
      showGenericSuccess: false,
      showPromotedFollowSuccess: false,
      pageView: '',
      journal_is_unfollowed: false
    };
  }
});
// CONCATENATED MODULE: ./pages/_code.vue?vue&type=script&lang=js&
 /* harmony default export */ var pages_codevue_type_script_lang_js_ = (_codevue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(15);

// CONCATENATED MODULE: ./pages/_code.vue





/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  pages_codevue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* harmony default export */ var _code = __webpack_exports__["default"] = (component.exports);

/***/ })

}]);